<?php
 class umiTemplaterTPLParsePageTest extends umiTestCase {protected static $templater;protected static $page;protected static $globalVars = array();public static function setUpBeforeClass() {self::$page = self::createPageFixture(__CLASS__, 'content', '');self::$page->content = 'Content';self::$page->title = 'Title';self::$page->meta_keywords = 'Keywords';self::$page->meta_descriptions = 'Description';self::$page->h1 = 'Header';self::$page->commit();$_REQUEST['path'] = '/' . self::$page->getAltName() . "/";self::controller()->analyzePath();$_REQUEST['test_request_param'] = 'testRequestParamValue';$_SERVER['test_server_param'] = 'testServerParamValue';self::$globalVars = self::controller()->getGlobalVariables();self::$templater = umiTemplater::create('TPL', dirname(__FILE__) . "/data/umiTemplaterTPLParsePageTest.tpl");self::$templater->setScope(self::$page->getId());}public static function tearDownAfterClass() {parent::tearDownAfterClass();unset($_REQUEST['path']);unset($_REQUEST['test_request_param']);unset($_SERVER['test_server_param']);}public function testParseShortMacroses() {$v9a0364b9e99bb480dd25e1f0284c8555 = "%header%";$v4dbdfdb5f7e507c8955733a7117cb0b3 = self::$templater->parse(self::$globalVars, $v9a0364b9e99bb480dd25e1f0284c8555);$this->assertEquals('Header', $v4dbdfdb5f7e507c8955733a7117cb0b3);}public function testParsePage() {$v9cd3487945daada914909f0b525e1284 = self::$templater->getTemplatesSource();list($v511e361e2a3590145939f3c570b28689) = self::$templater->getTemplates($v9cd3487945daada914909f0b525e1284, 'common');$v9931b1f15d0ba2b903c892bbfcff0448 = file_get_contents($v9cd3487945daada914909f0b525e1284);$this->assertEquals($v9931b1f15d0ba2b903c892bbfcff0448, $v511e361e2a3590145939f3c570b28689, 'Ошибка загрузки основного шаблона');$v13904f6a3227fdaa70cb2fb689caff5e = self::$templater->parse(self::$globalVars, $v511e361e2a3590145939f3c570b28689);$v71860c77c6745379b0d44304d66b6a13 = self::$page;$v0db3209e1adc6d67be435a81baf9a66e = $v71860c77c6745379b0d44304d66b6a13->getId();$vd2a2244210ba075db32a5f093f85ad7e = <<<EOF
Id: {$v0db3209e1adc6d67be435a81baf9a66e}
Keywords: Keywords
Description: Description
Title: UMI.CMS - Header
H1: Header
Content: Content
Keywords: Keywords
EOF;   $this->assertEquals($vd2a2244210ba075db32a5f093f85ad7e, $v13904f6a3227fdaa70cb2fb689caff5e);}}